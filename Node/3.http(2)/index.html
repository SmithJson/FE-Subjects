<!--
 * @Author: zhangl
 * @Date: 2020-01-12 14:30:02
 * @GitHub: https://github.com/SmithJson
 * @LastEditors  : zhangl
 * @LastEditTime : 2020-01-12 17:25:10
 * @Description: Do not edit
 * @FilePath: /FE-Subjects/Node/3.http(2)/code/index.html
 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <form class="file-upload">
        <input type="file" placeholder="请选择上传文件" id="send-input" name="file" multiple />
        <input class="send-btn" type="button" value="上传">
    </form>
    <video src="" controls></video>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const sendInput = document.querySelector('.file-upload #send-input');
        const sendBtn = document.querySelector('.file-upload .send-btn');
        const img = document.querySelector('video');
        const formData = new FormData();

        sendInput.addEventListener('change', function (e) {
            const { files } = e.target;

            for (let i = 0; i < files.length; i++) {
                formData.append('files[]', files[i]);
            }
        });

        sendBtn.addEventListener('click', function () {
            axios.post('http://localhost:3000/upload', formData, {
                    'Content-Type': 'multipart/form-data',
                })
                .then(res => {
                    console.log(res);
                });
        });
    </script>
</body>
</html>