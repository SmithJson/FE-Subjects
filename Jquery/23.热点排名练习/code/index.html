<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .tpl {
        display: none;
    }

    .clearfix::after {
        content: "";
        clear: both;
        display: block;
    }

    .wrapper {
        border: 1px solid #ccc;
        padding: 10px 5px;
        width: 350px;
        margin: 100px auto 0px;
    }

    .wrapper .headSection {
        margin-bottom: 10px;
    }

    .wrapper .headSection .hot {
        font-size: 18px;
        font-weight: bold;
        float: left;
    }

    .wrapper .headSection .change {
        color: #08f;
        float: right;
        cursor: pointer;
    }

    .wrapper .showSection .showItem {
        border-bottom: 1px solid;
        padding: 5px 0;
    }

    .wrapper .showSection .number {
        color: #fff;
        background: #0bf;
        width: 20px;
        height: 20px;
        text-align: center;
        display: inline-block;
    }

    .wrapper .showSection .mes {
        float: right;
    }

    .wrapper .showSection .mes::after {
        content: "";
        display: inline-block;
        width: 15px;
        height: 15px;
        background-size: 100% 100%;
    }

    .wrapper .showSection .mes.up::after {
        background-image: url("./img/up.png");
    }

    .wrapper .showSection .mes.down::after {
        background-image: url("./img/down.png");
    }
</style>
<body>
    <div class="wrapper">
        <div class="headSection clearfix">
            <span class="hot">热点搜索</span>
            <span class="change">换一换</span>
        </div>
        <ul class="showSection">
            <li class="tpl clearfix">
                <span class="number">1</span>
                <span class="title">金星</span>
                <span class="mes up">12312</span>
            </li>
        </ul>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="./data.js"></script>
    <script>
        (function () {
            // 初始化变量
            var $Wrapper = $('.wrapper');
            var $ShowSection = $Wrapper.find('.showSection');
            var colorsArray = ['#f54544', '#fff285', '#ffac38'];
            var curPage = 0;
            var totalPage = Math.ceil(data.length / 10);

            $ShowSection.hide();

            function bindEvent() {
                $Wrapper
                    .find('.change')
                    .click(function () {
                        curPage = ++curPage % totalPage;

                        renderPage(data);
                    });
            }

            function renderPage(data) {
                $ShowSection
                    .hide()
                    .find('.showItem')
                    .remove();

                // 根据数据渲染页面
                var len = (data.length - curPage * 10) >= 10 ? 10 : data.length - curPage * 10;

                // 控制每一页应该显示多少数据
                for (var i = 0; i < len; i++) {
                    var $Clone = $Wrapper
                                    .find('.tpl')
                                    .clone()
                                    .removeClass('tpl')
                                    .addClass('showItem');
                    var ele = data[i + curPage * 10];

                    $Clone
                        .children('span')
                        .eq(0)
                        .text(i + curPage * 10 + 1) // number
                        .css({
                            'backgroundColor': curPage === 0 && colorsArray[i + curPage],
                        })
                        .next()
                        .text(ele.title) // title
                        .next()
                        .text(ele.search) // mes
                        .addClass(ele.search > ele.hisSearch ? 'up' : 'down');

                    $('.showSection').append($Clone);
                }

                $ShowSection.fadeIn();
            }

            renderPage(data);
            bindEvent();
        })();
    </script>
</body>
</html>